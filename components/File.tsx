import { fileTypeDB } from "@/misc/ fileTypeDB";
import formatBytes from "@/utilities/formatBytes";
import Link from "next/link";

import FolderOutlinedIcon from "@mui/icons-material/FolderOutlined";
import InsertDriveFileOutlinedIcon from "@mui/icons-material/InsertDriveFileOutlined";
import KeyboardReturnOutlinedIcon from "@mui/icons-material/KeyboardReturnOutlined";
import Router, { NextRouter } from "next/router";

export default function File({
  object,
  router,
}: {
  object: fileType[0] | folderType[0];
  router: NextRouter;
}) {
  const Icon =
    "mime" in object
      ? fileTypeDB.find((o) => object?.mime?.includes(o.mime))?.icon ||
        InsertDriveFileOutlinedIcon
      : FolderOutlinedIcon;
  return (
    <tr>
      <td>
        <Link
          href={router.asPath + "/" + object.Key}
          className="flex flex-row gap-0.5 items-center"
        >
          <Icon /> {object.Key}
        </Link>
      </td>
      <td>{formatBytes(object.Size)}</td>
      <td>{"mime" in object ? object.mime : "n/a"}</td>
      <td>
        {new Date(object.LastModified).toLocaleDateString("en-US", {
          day: "numeric",
          month: "short",
          year: "numeric",
        })}
      </td>
    </tr>
  );
}
