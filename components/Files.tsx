import File from "./File";

import KeyboardReturnOutlinedIcon from "@mui/icons-material/KeyboardReturnOutlined";

import Link from "next/link";

export default function Files({
  files,
  folders,
  router,
  search,
}: filePropTypeExtended) {
  return (
    <div className="overflow-auto max-w-[99vw]">
      <table className="border-separate [border-spacing:0.75rem]">
        <thead>
          <tr className="[&>*]:text-start">
            <th>Filename</th>
            <th>Filesize</th>
            <th>MIME</th>
            <th>Modified</th>
          </tr>
        </thead>
        <tbody>
          {router.asPath !== "/" && (
            <tr>
              <td>
                <Link
                  href={
                    router.asPath.substring(
                      0,
                      router.asPath.lastIndexOf("/")
                    ) || "/"
                  }
                  className="flex flex-row gap-0.5 items-center"
                >
                  <KeyboardReturnOutlinedIcon /> Go back
                </Link>
              </td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
          )}
          {[...folders, ...files]
            .filter(
              search
                ? (o) =>
                    o.Key.toLocaleLowerCase().includes(
                      search.toLocaleLowerCase()
                    )
                : () => true
            )
            .map((object, index) => (
              <File router={router} object={object} key={index} />
            ))}
        </tbody>
      </table>
    </div>
  );
}
